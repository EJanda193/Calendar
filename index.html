<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Weekly Calendar</title>
  <style>
    body {
      background-color: #111;
      color: white;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }

    h1 {
      text-align: center;
      margin: 20px 0;
    }

    .controls {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 10px;
    }

    .controls input,
    .controls select,
    .controls button {
      padding: 4px;
      font-size: 14px;
    }

    .calendar {
      width: 100%;
      height: calc(100vh - 150px);
      display: grid;
      grid-template-columns: 50px repeat(7, 1fr);
      grid-template-rows: repeat(29, 1fr);
      border-top: 1px solid #444;
    }

    .calendar div {
      border: 1px solid #222;
      border-top: none;
      border-left: none;
    }

    .time-label {
      text-align: right;
      padding-right: 5px;
      font-size: 12px;
      color: #ddd;
    }

    .header {
      background-color: #222;
      font-weight: bold;
      text-align: center;
      border-top: 1px solid #444;
    }

    .course-block {
      position: absolute;
      background-color: #66b2ff;
      color: #000;
      padding: 3px;
      border-radius: 4px;
      font-size: 12px;
      overflow: hidden;
    }

    .calendar-container {
      position: relative;
      width: 100%;
      height: 100%;
    }
  </style>
</head>
<body>
  <h1>Weekly Calendar</h1>
  <div class="controls">
    <input id="course" placeholder="CIS*2030">
    <input id="type" placeholder="LEC">
    <input id="location" placeholder="CRSC 116">
    <select id="day">
      <option>Mon</option><option>Tue</option><option>Wed</option>
      <option>Thu</option><option>Fri</option><option>Sat</option><option>Sun</option>
    </select>
    <input id="startTime" placeholder="1:30">
    <select id="startAmPm"><option>AM</option><option selected>PM</option></select>
    <input id="endTime" placeholder="2:20">
    <select id="endAmPm"><option>AM</option><option selected>PM</option></select>
    <button onclick="addCourse()">Add Course</button>
  </div>

  <div class="calendar-container">
    <div class="calendar" id="calendar"></div>
  </div>

  <script>
    const calendar = document.getElementById('calendar');
    const days = ["", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"];

    // Build the calendar grid
    for (let row = 0; row <= 28; row++) {
      for (let col = 0; col < 8; col++) {
        const cell = document.createElement('div');

        if (row === 0 && col > 0) {
          cell.classList.add("header");
          cell.innerText = days[col];
        } else if (col === 0 && row > 0) {
          const hour = 8 + Math.floor((row - 1) / 2);
          const half = (row - 1) % 2 === 0 ? "00" : "30";
          const ampm = hour >= 12 ? "PM" : "AM";
          const formattedHour = ((hour - 1) % 12 + 1) + ":" + half + " " + ampm;
          cell.classList.add("time-label");
          cell.innerText = formattedHour;
        }

        calendar.appendChild(cell);
      }
    }

    function timeToFloat(t, ampm) {
      let [h, m] = t.split(':').map(Number);
      if (ampm === 'PM' && h !== 12) h += 12;
      if (ampm === 'AM' && h === 12) h = 0;
      return h + (m / 60);
    }

    function addCourse() {
      const course = document.getElementById('course').value.trim();
      const type = document.getElementById('type').value.trim();
      const location = document.getElementById('location').value.trim();
      const day = document.getElementById('day').value;
      const startTime = document.getElementById('startTime').value.trim();
      const endTime = document.getElementById('endTime').value.trim();
      const startAmPm = document.getElementById('startAmPm').value;
      const endAmPm = document.getElementById('endAmPm').value;

      if (!course || !type || !location || !startTime || !endTime) {
        alert("Please fill in all fields.");
        return;
      }

      const start = timeToFloat(startTime, startAmPm);
      const end = timeToFloat(endTime, endAmPm);

      const top = (start - 8) * 40;
      const height = (end - start) * 40;
      const left = days.indexOf(day) * (100 / 8) + 12.5;

      const block = document.createElement('div');
      block.className = 'course-block';
      block.style.top = `${top}px`;
      block.style.left = `calc(${left}% + 1px)`;
      block.style.width = `calc(12.5% - 3px)`;
      block.style.height = `${height}px`;
      block.innerText = `${course} ${type}\n${location}`;
      document.querySelector('.calendar-container').appendChild(block);
    }
  </script>
</body>
</html>
